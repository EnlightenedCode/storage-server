general:
  artifacts:
    - target.tar.gz
dependencies:
  post:
    - mkdir -p src/private-keys
    - lftp 192.254.220.36 -u $RISE_FTP_USER,$RISE_FTP_PASS -e "set ssl:verify-certificate false; set xfer:clobber yes; mget -O src/private-keys /private-keys/*; quit"
    - lftp 192.254.220.36 -u $RISE_FTP_USER,$RISE_FTP_PASS -e "set ssl:verify-certificate false; get /jenkins-companies/jenkins-company-test.js -o api-tests/jenkins-company.js; quit"
test:
  override:
    - cd api-tests && ./run-tests.sh --password=$JENKINS_PASS
deployment:
  staging:
    branch: /(feature|fix|chore).*/
    commands:
      - echo no-deploy-yet
      - tar czvf target.tar.gz target
  production:
    branch: master
    commands:
      - echo no-deploy-yet
      - tar czvf target.tar.gz target
